{% extends 'core/base.html' %}
{% load static%}
{% block page_specific_css %}
 <style>
    /* General Profile Container Styles */
    .profile-container {
        border-radius: 50px;
        max-width: 90%;
        margin: 20px auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #E7ECF2; /* Light blue-gray background */
    }

    /* Profile Card Styles */
    .profile-card {
        display: flex;
        align-items: start;
        gap: 20px;
        width: 100%;
        border: 1px solid #A3B1C6; /* Soft blue border */
        padding: 20px;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 20px;
        background-color: #FFFFFF; /* White background for the card */
    }
.profile-skills {
    max-width: 200px;           /* Ensure this container doesn't exceed the card width */
}

.profile-skills p {
    word-wrap: break-word;     /* Allows long words to be broken and wrap onto the next line */
    overflow-wrap: break-word; /* Ensures wrapping at the end of the last word that can fit */
}
    /* Profile Image Styles */
    .profile-image-container {
        flex-shrink: 0;
    }

    .profile-image {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #2F4F4F; /* Dark slate gray border */
    }

    /* Profile Details Styles */
    .profile-details {
        flex-grow: 1;
        background: #FFFFFF;
        color: #06142E; /* Dark blue for text */
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* Profile Name Styles */
    .profile-name {
        color: #06142E; /* Dark blue */
        margin-bottom: 10px;
    }

    /* Profile Information Block Styles */
    .profile-email, .profile-type, .profile-portfolio, .profile-company {
        background: #E7ECF2; /* Light blue-gray background */
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* Skills List Styles */
    .skills-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 5px;
    }

    .skills-list li {
        background: #5B8DB8; /* Medium blue background */
        color: #FFFFFF; /* White text */
        padding: 5px 15px;
        border-radius: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        font-weight: bold;
        text-transform: uppercase;
    }

    /* Button Styles */
    .edit-profile-btn-container {
        width: 100%;
        display: flex;
        justify-content: center;
        padding: 10px 0;
    }

    .edit-profile-btn {
        background-color: #3C6E71; /* Teal blue */
        color: white;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        display: inline-block;
        transition: background-color 0.3s ease;
    }

    .edit-profile-btn:hover {
        background-color: #2F4F4F; /* Dark slate gray on hover */
    }

    /* Error Message Styles */
    .profile-error {
        color: #D9534F; /* Red color for errors */
    }

    /* Reviews Styles */
    .reviews {
        background-color: #f8f9fa;
        border-left: 4px solid #3C6E71; /* Teal blue border */
        padding: 10px;
        margin-top: 10px;
        white-space: pre-line;
    }

    /* Link Styles */
    .profile-website a, .profile-contact-email a {
        color: #007bff;
        text-decoration: none;
    }

    .profile-website a:hover, .profile-contact-email a:hover {
        text-decoration: underline;
    }

    /* User Profile Styles */
    .user-profile {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        max-width: 700px;
        padding: 30px;
        background-color: #ffffff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
    }

    .user-name {
        color: #2E86C1;
        font-size: 2em;
        text-align: left;
        margin-bottom: 25px;
        border-bottom: 2px solid #2E86C1;
        padding-bottom: 10px;
    }

    .user-details {
        color: #4A4A4A;
    }

    .detail {
        line-height: 1.8;
        margin-bottom: 15px;
        font-size: 1.1em;
    }

    .label {
        font-weight: bold;
        color: #2E86C1;
    }

    .client-link {
        color: #2E86C1;
        text-decoration: none;
    }

    .client-link:hover {
        text-decoration: underline;
        color: #21618C;
    }

    .client-orders {
        background: #FFFFFF;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
    }

    .orders-list {
        list-style: none;
        padding: 0;
    }

    .orders-list li {
        background: #f2f2f2;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .orders-list li strong {
        color: #5E9CAE;
        margin-bottom: 5px;
        display: block;
    }

    /* Responsive Design Adjustments */
    @media (max-width: 768px) {
        .user-profile {
            padding: 20px;
        }

        .user-name {
            font-size: 1.8em;
        }

        .detail {
            font-size: 1em;
        }

        .profile-container {
            max-width: 100%;
            padding: 0 10px;
        }

        .profile-card {
            flex-direction: column;
            align-items: stretch;
        }

        .profile-header, .profile-details {
            flex: none;
        }

        .profile-details {
            padding: 15px;
        }

        .edit-profile-btn {
            width: 100%;
            margin-top: 15px;
        }
    }
    .profile-video {
        max-width: 200px; /* Fixed width for the video container */
        margin-top: 20px; /* Spacing above the video container */
    }

    .profile-video video {
        width: 100%; /* Make video responsive */
        height: auto; /* Maintain aspect ratio */
        border-radius: 10px; /* Rounded corners for the video */
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Shadow for depth */
    }

    /* Responsive Design Adjustments */
    @media (max-width: 768px) {
        .profile-video {
            max-width: 100%; /* Full width on smaller screens */
        }
    }
</style>
{% endblock page_specific_css %}

{% block content %}
<div class="profile-container">
    <div class="profile-card">
        <div class="profile-header">
            <!-- Profile Image -->
            {% if user.freelancer_profile.profile_image %}
                <img class="profile-image" src="{{ user.freelancer_profile.profile_image.url }}" alt="Freelancer Profile Image">
            {% elif user.client_profile.profile_image %}
                <img class="profile-image" src="{{ user.client_profile.profile_image.url }}" alt="Client Profile Image">
            {% else %}
                <img class="profile-image" src="{% static 'img/images.png' %}" alt="Default Profile Image">
            {% endif %}
            <!-- Skills list below the profile image -->
            {% if user.user_type == "freelancer" %}
                <div class="profile-skills">
                    <strong>Skills:</strong>
                    <ul class="skills-list">
                        {% for skill in user.freelancer_profile.skills.all %}
                            <li>{{ skill.name }}</li>
                        {% endfor %}
                    </ul>
                        <p><strong>Skill Description:</strong> {{ user.freelancer_profile.skill_desc }}</p>
                </div>

            {% endif %}
         {% if user.user_type == "client" %}
        <div class="client-orders">
            <h3>Your Orders:</h3>
            <ul class="orders-list">
                {% for order in client_orders %}
                    <li>
                        <strong>Title:</strong> {{ order.title }}<br>
                        <strong>Status:</strong> {{ order.get_status_display }}<br>
                    </li>
                {% empty %}
                    <li>No orders found.</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
            <div class="edit-profile-btn-container">
                <a href="{% url 'accounts:edit_profile' %}" class="edit-profile-btn">Edit Profile</a>
            </div>
        </div>
        <div class="profile-details">

            {% if user.user_type == "freelancer" and user.freelancer_profile %}
                <h1 class="user-name">{{ user.first_name|default:user.username }} {{ user.last_name }}</h1>
                <p class="profile-type"><strong></strong> {{ user.freelancer_profile }}</p>
                <p class="profile-portfolio"><strong>Portfolio:</strong> <a href="{{ user.freelancer_profile.portfolio }}">{{ user.freelancer_profile.portfolio }}</a></p>
                {% if user.user_type == "freelancer" and user.freelancer_profile.video and user.freelancer_profile.video.url %}
        <div class="profile-video">
            <video controls>
                <source src="{{ user.freelancer_profile.video.url }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    {% endif %}
                <p><strong>Average Rating:</strong> {{ user.freelancer_profile.average_rating }}</p>
                <p><strong>Reviews:</strong></p>
                {% if user.freelancer_profile.reviews %}
                    <div class="reviews">{{ user.freelancer_profile.reviews }}</div>
                {% else %}
                    <div class="reviews">No reviews yet.</div>
                {% endif %}
            {% elif user.user_type == "client" and user.client_profile %}
                <!-- Client specific fields -->
                <div class="user-profile">
    <h1 class="user-name">{{ user.first_name|default:user.username }} {{ user.last_name }}</h1>
    <div class="user-details">
        <p class="detail"><span class="label">Email:</span> {{ user.email }}</p>
        <p class="detail"><span class="label">Company Name:</span> {{ user.client_profile.company_name }}</p>
        <p class="detail"><span class="label">Website:</span> <a href="{{ user.client_profile.company_website }}" class="client-link">{{ user.client_profile.company_website }}</a></p>
        <p class="detail"><span class="label">Contact Name:</span> {{ user.client_profile.contact_name }}</p>
        <p class="detail"><span class="label">Contact Email:</span> {{ user.client_profile.contact_email }}</p>
        <p class="detail"><span class="label">Contact Phone:</span> {{ user.client_profile.contact_phone }}</p>
        <p class="detail"><span class="label">Company Description:</span> {{ user.client_profile.company_description }}</p>
        <p class="detail"><span class="label">Industry:</span> {{ user.client_profile.industry }}</p>
        <p class="detail"><span class="label">Preferred Communication:</span> {{ user.client_profile.get_preferred_communication_display }}</p>
        <p class="detail"><span class="label">Additional Notes:</span> {{ user.client_profile.additional_notes }}</p>
    </div>
</div>

            {% else %}
                <p class="profile-error" style="margin-left: 5px"> User type not specified or profile not found.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
